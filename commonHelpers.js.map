{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst key = '44800078-24df89d06f24ed99fe7b62add';\n\nfunction getPhoto(query) {\n  return fetch(\n    `https://pixabay.com/api/?key=${key}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n  ).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n\nconst galleryEl = document.querySelector('.gallery');\nconst searchEl = document.querySelector('.search');\nconst loaderEl = document.querySelector('.loader');\nsearchEl.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const formEl = event.currentTarget;\n  const queryValue = formEl.elements.query.value.trim().toLowerCase();\n  if (queryValue === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n  galleryEl.innerHTML = '';\n  loaderEl.classList.remove('hidden');\n\n  getPhoto(queryValue)\n    .then(data => renderCard(data.hits))\n    .catch(onFetchError)\n    .finally(() => {\n      loaderEl.classList.add('hidden');\n      formEl.reset();\n    });\n}\n\nfunction renderCard(cards) {\n  const markup = cards\n    .map(\n      ({ likes, views, comments, downloads, webformatURL, largeImageURL }) => `\n    <a href=\"${largeImageURL}\" class=\"card\" </>\n      <div class=\"card-img-top\">\n        <img class=\"photo\" src=\"${webformatURL}\" alt=\"Image\">\n      </div>\n      <div class=\"card-body\">\n        <p class=\"card-text\">Likes: ${likes}</p>\n        <p class=\"card-text\">Views: ${views}</p>\n        <p class=\"card-text\">Comments: ${comments}</p>\n        <p class=\"card-text\">Downloads: ${downloads}</p>\n      </div>\n    `\n    )\n    .join('');\n  galleryEl.innerHTML = markup;\n  new SimpleLightbox('.gallery a');\n}\n\nfunction onFetchError() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n"],"names":["key","getPhoto","query","res","galleryEl","searchEl","loaderEl","handleSearch","event","formEl","queryValue","iziToast","data","renderCard","onFetchError","cards","markup","likes","views","comments","downloads","webformatURL","largeImageURL","SimpleLightbox"],"mappings":"wvBAMA,MAAMA,EAAM,qCAEZ,SAASC,EAASC,EAAO,CACvB,OAAO,MACL,gCAAgCF,CAAG,MAAME,CAAK,0DAClD,EAAI,KAAKC,GAAO,CACZ,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CAEA,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAW,SAAS,cAAc,SAAS,EACjDD,EAAS,iBAAiB,SAAUE,CAAY,EAEhD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAASD,EAAM,cACfE,EAAaD,EAAO,SAAS,MAAM,MAAM,KAAI,EAAG,cACtD,GAAIC,IAAe,GAAI,CACrBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CACDP,EAAU,UAAY,GACtBE,EAAS,UAAU,OAAO,QAAQ,EAElCL,EAASS,CAAU,EAChB,KAAKE,GAAQC,EAAWD,EAAK,IAAI,CAAC,EAClC,MAAME,CAAY,EAClB,QAAQ,IAAM,CACbR,EAAS,UAAU,IAAI,QAAQ,EAC/BG,EAAO,MAAK,CAClB,CAAK,CACL,CAEA,SAASI,EAAWE,EAAO,CACzB,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,MAAAE,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,aAAAC,EAAc,cAAAC,CAAa,IAAO;AAAA,eAC/DA,CAAa;AAAA;AAAA,kCAEMD,CAAY;AAAA;AAAA;AAAA,sCAGRJ,CAAK;AAAA,sCACLC,CAAK;AAAA,yCACFC,CAAQ;AAAA,0CACPC,CAAS;AAAA;AAAA,KAG9C,EACA,KAAK,EAAE,EACVhB,EAAU,UAAYY,EACtB,IAAIO,EAAe,YAAY,CACjC,CAEA,SAAST,GAAe,CACtBH,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACN,CAAG,CACH"}